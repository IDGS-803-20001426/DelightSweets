{% extends './layout.html' %}

{% block title %}Corte de caja{% endblock %}

{% block body %}
<body>
    <div class="container">
        {% if cortes %}
        <h1 class="text-center mt-5">Cortes de Caja Totales</h1>

        <div class="text-center mb-3">
            <p>Venta del día: {{ VentaDelDía }}</p>
        </div>

        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead class="thead-dark">
                    <tr>
                        <th>ID Corte Caja Venta</th>
                        <th>ID Venta</th>
                        <th>ID Corte Caja</th>
                        <th>Total Venta</th>
                    </tr>
                </thead>
                <tbody>
                    {% for corte in cortes %}
                    <tr>
                        <td>{{ corte.id_corte_caja_venta }}</td>
                        <td>{{ corte.id_venta }}</td>
                        <td>{{ corte.id_corte_caja }}</td>
                        <td>{{ corte.total_venta }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% if monto_retiro_total %}
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead class="thead-dark">
                    <tr>
                        <th>ID Retiro</th>
                        <th>Fecha y Hora</th>
                        <th>Monto</th>
                        <th>Motivo</th>
                        <th>ID Corte Caja</th>
                        <th>ID Usuario</th>
                    </tr>
                </thead>
                <tbody>
                    {% for retiro in retiros %}
                    <tr>
                        <td>{{ retiro.id_retiro }}</td>
                        <td>{{ retiro.fecha_hora }}</td>
                        <td>{{ retiro.monto }}</td>
                        <td>{{ retiro.motivo }}</td>
                        <td>{{ retiro.id_corte_caja }}</td>
                        <td>{{ retiro.id_usuario }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="2">Monto Total de Retiros:</td>
                        <td>{{ monto_retiro_total }}</td>
                        <td colspan="3"></td>
                    </tr>
                </tfoot>
            </table>
        </div>
        {% endif %}

        {% if monto_retiro_total_pago %}
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead class="thead-dark">
                    <tr>
                        <th>ID Retiro</th>
                        <th>Fecha y Hora</th>
                        <th>Monto</th>
                        <th>Motivo</th>
                        <th>ID Corte Caja</th>
                        <th>ID Usuario</th>
                    </tr>
                </thead>
                <tbody>
                    {% for retiro in retiros_pago %}
                    <tr>
                        <td>{{ retiro.id_retiro }}</td>
                        <td>{{ retiro.fecha_hora }}</td>
                        <td>{{ retiro.monto }}</td>
                        <td>{{ retiro.motivo }}</td>
                        <td>{{ retiro.id_corte_caja }}</td>
                        <td>{{ retiro.id_usuario }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="2">Monto Total de Retiros por Pago:</td>
                        <td>{{ monto_retiro_total_pago }}</td>
                        <td colspan="3"></td>
                    </tr>
                </tfoot>
            </table>
        </div>
        {% endif %}


        <div class="text-center mt-3">
            <form action="/admin/ventas_admin" method="get">
                <button type="submit" class="btn btn-primary">Regresar</button>
            </form>
            {% if pdf_base64 %}
            <br>
            <form action="/descargarPDF" method="post">
                <input type="hidden" name="pdf_base64" value="{{ pdf_base64 }}">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <button type="submit" class="btn btn-success">Descargar PDF</button>
            </form>
            {% endif %}
        </div>
        {% else %}
        <div class="text-center mt-3">
            <p>No es posible visualizar el corte del día.</p>
        </div>
        <div class="text-center mt-3">
            <form action="/admin/ventas_admin" method="get">
                <button type="submit" class="btn btn-primary">Regresar</button>
            </form>
        </div>
        {% endif %}
    </div>
</body>
{% endblock %}
